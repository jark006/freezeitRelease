# freezeit 冻它

自动冻结那些较为耗电且非必须运行的第三方后台应用，由C++开发并原生运行，效率，省电。

Automatically freeze those third-party background applications that consume more power and do not have to run. It is developed by C++ and runs natively, which is efficient and power-saving.


- 基本说明: 
  - 1.垃圾模块, 一定有大把BUG, 快去[ 酷安@JARK006 ]骂他。
  - 2.模块有两份白名单, 代表均开放后台自由: 
      A.内置白名单: 包含主流第三方输入法(非全部), 企业微信, 钉钉, 李跳跳(cn.litiaotiao.app), 从Ver1.6.4起 【微信, QQ, TIM, 支付宝】 已经从内置白名单【剔除】。
      B.自定义白名单: [ /sdcard/Android/freezeit.conf ]
  - 3.开机日志会列出本机支持的全部 [内置白名单/自定义白名单], 若没发现你的应用, 请检查配置是否正确。
      模块不会接管系统应用, 若怀疑某个系统应用有问题, 请检查其是不是可卸载的(按第三方处理), 即使是官方推出的应用。
  - 4.支持普通前台, 小窗, 分屏。可能支持多小窗口(未测), 多屏(未测)。
  - 5.请不要与其他功能类似的[ 墓碑模块 / 墓碑模式 ]一同使用, 避免冲突，暂时与系统自带[ 暂停执行已缓存的应用 ]无冲突。
  - 6.仅支持第三方应用冻结解冻, 杀后台行为由系统或其他模块管理。
  - 7.默认刷入可直接适合大部分人使用, 特定人群请自定义白名单。
  - 8.C++开发, 原生运行于系统底层, 相较于其他JAVA层, Shell层的类似功能, 效率更高。
  - 9.冻它模块与App通信采用TCP_SOCKET(127.0.0.1, 本地环回, 模块为Server，APP为Client), 因此通信范围仅限本机内部, 没有隐私泄漏风险。APP端开源, 欢迎参观代码, 但C++端屎山代码暂时闭源。
  - 10.本次依旧限时公测, 将于[ 2022-07-16 00:00:00 ]过期, 因为短时间内无法及时发现所有BUG, 运行越久越容易触发未知BUG, 模块会在到测试到期前发布新版, 敬请留意, 适配了Magisk的模块更新机制, 能上GitHub就可以在里面更新。
  - 11.本人机型为红米K50Pro, MIUI13.0.18稳定版, 从开发到测试完全基于此机型, 故模块兼容依次从: 该机型-> MIUI13(MTK) -> MIUI -> 其他平台 依次递减, 亲缘性越远兼容越差, 测试平台有限, 望谅解。
  - 12.建议提前做一个全局 dex-oat (Everything模式, 一次就行, 不用每次开机都做), 提升运行效率, 但存储空间占用会大很多, 用空间换时间, 会省下亿点电, 各位自己决定。
  - 13.不再单独开放微信推送进程, 因为大部人有支付场景和后台音视频通话需求, 所以请按需添加白名单, 不在白名单可能无法后台音视频, 请自测。
  - 14.冻它模块官方平台: 

      A: Q群吹水 781222669 (冻它模块freezeit测试交流群)[https://jq.qq.com/?_wv=1027&k=JY3DBDap]

      B: (GitHub发布)[https://github.com/jark006/freezeitRelease]

      C: (TG交流吹水)[https://t.me/freezeitModule]

      D: (TG发布通道)[https://t.me/freezeitRelease]

- 画小饼(一定会做, 但不知道什么时候做和做完🕊️): 
  - 1.配套APP正在开发。
  - 3.将针对已接入系统推送而收到消息的APP开放临时后台(优先适配MIpush), 点击消息可拉起应用。
  - 4.将优化兼容系统自带[ 暂停执行已缓存的应用 ]服务。(目前暂无反馈有冲突情况)
  - 5.将智能识别开放有后台音频播放, 下载服务的应用, 停止播放和下载完成, 将进入超时列队, 超时后暂停。
  - 6.将在安装时进行兼容性检查, 禁用所有可能冲突的模块。用户可决定是否手动再次开启。

- 画大饼🤩(不是), 头发不保🥵: 
  - 1.计划研究Framework, ActivityManager等底层, 重塑Activity生命周期, 主要是[ OnPause/OnResume ]等底层机制。 解决[ 重回应用 ]再次显示广告问题。

- 更新内容 2022-06-25 Ver1.6.3_Dev -> Ver1.6.4
  - 0.重要！！！【微信, QQ, TIM, 支付宝】 已经从内置白名单【剔除】, 没有HMS、FCM、Thanox代收的用户需自行添加白名单, 有条件的请尝试以上推送, 可以大大提升待机续航。
  - 1.尝试阻塞监控前台任务切换, 剔除高耗能的前台任务轮询, 模块自身运行功耗将超大幅下降, 未完全验证, 请自测。
  - 2.完全修复运行一段时间就挂掉的BUG。
  - 3.第三方应用(无论是否白名单)均提权(-800 >>> oom_score_adj)到系统应用运行级别, 俗称“杀不死”, 提高后台留存能力, 类原生系统效果明显, 
      定制UI随缘, 请关闭后台增强类模块或Thanox配置等等, 避免冲突。
  - 4.单独后台播放会导致放完一首即停止, 无法自动下一首, 故暂时剔除[ 保留单独后台播放进程 ]功能, 有后台播放需要请添加白名单或悬挂小窗。
  - 5.修复白名单配置文件[ 单独包名 ]解析可能错误或遗漏的BUG, 为避免可能失效, 请完整填写[ 包名 空格 名称 ]。

- 更新内容 2022-06-22 Ver1.6.2 -> Ver1.6.3
  - 1.恢复日志文件记录。
  - 2.尝试修复运行一段时间就挂掉的BUG, 未完全验证。
  - 3.尝试将第三方应用(无论是否白名单)提权到系统应用运行级别, 尽量避免被杀, 未完全验证。

- 更新内容 2022-06-22 Ver1.6 -> Ver1.6.2
  - 1.没啥说的, 就是刷刷版本号, 诶, 就是玩。
  - 2.禁用日志文件记录, 只会在开机时刻输出本次说明。

- 更新内容 2022-06-20 Ver1.5 -> Ver1.6
  - 1.重要更新: V1.5版存在冻结功能失效, V1.6已修复。

- 更新内容 2022-06-20 Ver1.4 -> Ver1.5
  - 1.后台任务冻结由[ 立即执行 ]改为[ 超时10秒 ], 修复打开应用时被系统授权弹窗干扰而卡死的BUG。
  - 2.修复关闭应用导致的日志无限刷新。

- Ver1.6.4 仍存在的问题: 
  - 1.模块[ V1.6.4 ]版本有非常大改动, 暂时无法确定续航增加还是减少, 请多关注你的息屏/亮屏耗电情况, 反馈给我, 谢谢。
      目前好处1: 大大提升后台存留, 无缝衔接刚刚离开时的应用页面, 仿佛没离开过(部分应用会重新刷新该页面)。
      目前好处2: 通过压制不必要的后台CPU占用, 系统资源可以更集中到当前前台任务, 可以大大提升前台应用流畅性。
  - 2.正在播放音视频的应用切后台冻结后, 会被暂停播放, 再解冻有概率不会继续播放而进度条依旧在走动, 请暂停再播放。
  - 3.息屏时刻在前台的应用, 息屏后也一直属于前台, 不会冻结, 所以息屏之前请回到桌面。小妙招: 打开音乐播放, 然后直接息屏可以正常播放。
  - 4.目前同步任务切换机制不完善, 部分定制UI超时冻结会有不同程度延后(十秒到几分钟), 而不是此前固定的10秒超时。
  - 5.暂不支持亮屏后台音乐, 悬浮应用, 有需要请加入白名单, 或悬挂小窗。
  - 6.后台应用无响应问题, 请暂时使用[ 酷安@myflavor ] 的NoANR, 因为[ 冻它APP ]正在开发, NoANR2.3.apk 已包含在本模块包里, 
      有需要请手动安装并到 LSPosed 里开启它勾选系统框架, 然后重启。部分用户反馈[ NoANR ]可能导致拨号或接听出问题, 请自测。
  - 7.部分应用被冻结后, 会被其他应用或服务关联唤醒, 模块暂时没有切断唤醒功能, 也不会回头检查已经冻结过的应用。
      若发现仍有活跃后台, MIUI系统可在该应用的【自启动】管理设置【关闭-允许被唤醒】, 其他无类似功能的系统请搭配有切断唤醒的模块或应用。
      经典案例: 头条和抖音相互唤醒, 离开头条, 头条被冻, 打开抖音, 然后顺带拉起后台头条。

!!!重要 第一遍!!! Ver1.6.4起 【微信, QQ, TIM, 支付宝】 已经从内置白名单【剔除】, 没有 HMS、FCM、Thanox代收 的朋友则请添加白名单
!!!重要 第二遍!!! Ver1.6.4起 【微信, QQ, TIM, 支付宝】 已经从内置白名单【剔除】, 没有 HMS、FCM、Thanox代收 的朋友则请添加白名单
!!!重要 第三遍!!! Ver1.6.4起 【微信, QQ, TIM, 支付宝】 已经从内置白名单【剔除】, 没有 HMS、FCM、Thanox代收 的朋友则请添加白名单
